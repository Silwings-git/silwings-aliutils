2020.08.02:
图片上传里面涉及到的是图片压缩.
但图片压缩可能会出现有的压缩有的不需要压缩,并不是一个全局统一的配置

1.考虑在配置文件配置是否使用图片压缩.true为使用
    
2.考虑像qq发动态图片时,可以手动选择上传的图片清晰度.可以有两种选择.
    2.1:提供一个获取上传码的接口,后续提供上传码来决定是否进行压缩,什么程度的压缩
    2.2:提供多个清晰度的上传接口(或者一个接口多个类型),由前端自由选择.后台只需对接口进行校验看有没有权限上传对应清晰度的图片即可
    
    如果使用2.1必须使用redis缓存.使用2.2则不需要.暂时考虑做2.2吧
 
3.考虑将来可能像qq一样有多种压缩程度,应该提供一个mapping,具体压缩多少由key决定.同时提供一个默认的压缩比例

4.综上:
controller中提供一个上传接口.包含一个图片参数和清晰度选择参数compressLevel(可null).
不传递compressLevel时取默认值.
如果配置了压缩图片,默认值取最高压缩比例
如果没有配置压缩图片,默认值为不压缩
配置压缩图片时,接受多个参数,在不传递compressLevel时默认取0角标

使用一个视频上传服务工厂,生产压缩和不压缩两种服务

第一版完成